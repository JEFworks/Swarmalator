<html>
    <head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>	
	<link rel="stylesheet" href="swarmalator.css"/>
	<style>
	    .github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}
	    .panel-collapse-clickable {
		cursor: pointer;
	    }
	</style>
    </head>

    <body onload="init_swarm()" style="background-color:#377bb5">

	<!-- github corner -->
	<a href="https://github.com/jefworks/swarmalator" class="github-corner"><svg width="50px" height="50px" viewBox="0 0 250 250" style="z-index:1000; fill:#fff; color:#377bb5; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>
	
	<!-- butterfly svg -->
	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" xmlns:xml="http://www.w3.org/XML/1998/namespace" class="svg-defs">
	    <defs>
		<g id="butterfly_g">
		    <!-- SVG modified from freepik.com -->
		    <path stroke="#000000" stroke-miterlimit="10" d="M74.997,30.036C70.406,16.874,59.479,2.254,59.01,1.684
								     c-0.479-0.586-0.894-2.165-1.58-1.54c-0.686,0.624,0.858,1.43,0.858,1.43s-0.086,0.682,0.585,0.769c0,0,3.723,5.234,6.42,10.007
								     c4.055,7.167,7.495,15.132,8.63,17.844c-2.252,0.658-2.819,3.383-2.455,5.485l-1.461-0.737
								     c-8.267-7.125-28.008-22.971-42.591-25.34c-3.969-0.644-7.656-0.973-10.952-0.973c-7.908,0-13.234,1.854-15.399,5.364
								     c-1.375,2.227-1.418,4.984-0.132,8.193c1.887,4.703,3.721,6.52,5.495,8.273c0.438,0.434,0.87,0.865,1.301,1.333
								     c0.059,0.173,0.178,0.32,0.349,0.402c0.006,0.001,0.012,0.006,0.017,0.006c1.246,1.439,2.477,3.335,3.75,6.778
								     c0.001,0.002,0.001,0.004,0.003,0.004c0.442,1.199,0.891,2.58,1.347,4.204c2.726,9.701,6.822,13.839,13.697,13.839l0,0
								     c0.3,0,0.611-0.01,0.925-0.026c-1.407,1.403-2.366,2.971-2.894,4.731c-1.188,3.968-0.195,8.815,3.033,14.818
								     c1.138,2.106,2.441,4.157,3.854,6.108c0.002,0.007,0.012,0.019,0.018,0.022c6.545,9.041,15.396,15.946,20.732,17.123
								     c0.603,0.133,1.222,0.197,1.842,0.197c5.793,0,11.34-5.716,12.636-13.015c0.644-3.635,1.129-5.832,1.931-9.461
								     c0.709-3.189,1.684-7.596,3.254-15.188c0.418,6.831,1.264,16.187,2.777,16.187"/>		    
		</g>	
	    </defs>
	</svg>

	<div class="container-fluid" style="margin:0px; padding:0px">
	    <!-- intro --->
	    <div class="panel" style="background-color: rgba(255, 255, 255, 0.5); border: 0px;">
		<div class="panel-heading"  style="background-color:#377bb5; color:#fff; height: 50px; border-radius: 0 !important;">
		    <h2 align="center" style="padding:0px; margin:0px;">
			The Butterfly Swarmalator
			<span class="pull-right panel-collapse-clickable" data-toggle="collapse" data-parent="#accordion" href="#filterPanel">
			    <i class="glyphicon glyphicon-chevron-up"></i>
			</span>
		    </h2>
		</div>
		<div id="filterPanel" class="panel-collapse panel-collapse collapse in">
		    <div class="panel-body">
			<div class="row">
			    <div class="col-md-12">
				This is a non-HTML5-canvas version of <a href="http://usediscretion.blogspot.com/2017/01/the-swarmalator.html">The Swarmalator by Rudy Arthur</a>, which is a simulation of self-organizing systems originally described by <a href="https://arxiv.org/abs/1701.05670">O'Keeffe and Strogatz</a>. In this adaptation, I build on Rudy's code and <a href="http://jef.works/blog/2017/11/05/animated-svg-butterfly/">my previous SVG butterfly</a> to create a swarm of self-organizing butterflies.
				<br><br>
				N is the number of butterflies. K is the strength of the phase coupling, where phase is encoded by color. So neighboring butterflies will want to have same colour for K > 0 and as different as possible for K < 0. Set K=0 for no phase (ie. color) change. J is the attraction between phases. So for J > 0, like colored butterflies attracts like colored butterflies and for J < 0 opposite colors attract. dt is the speed of animation. Restart by clicking the 'swarm' button, which initialized butterflies at a random position and gives then a random phase/colour.
			    </div>
			</div>
			<br>
			<div class="row">
			    <div class="col-md-6">
				<!-- swarm parameters --->				    
				<label for="paramN">N:</label>
				<span id="paramNSpan">50</span>			
				<input id="paramN" type="range" name="rangeInput" min="0" max="100" value="50" onchange="$(paramNSpan).text(this.value); k = this.value; console.log(k)">
				<br>			
				<label for="paramJ">J:</label>
				<span id="paramJSpan">2.0</span>			
				<input id="paramJ" type="range" name="rangeInput" min="-2.0" max="2.0" step ="0.01" value="2.0" onchange="$(paramJSpan).text(this.value); k = this.value; console.log(k)">
				<br>			
				<label for="paramK">K:</label>
				<span id="paramKSpan">0.0</span>			
				<input id="paramK" type="range" name="rangeInput" min="-2.0" max="2.0" step ="0.01" value="0.0" onchange="$(paramKSpan).text(this.value); k = this.value; console.log(k)">
				<br>			
				<label for="paramdt">dt:</label>
				<span id="paramdtSpan">0.3</span>
				<input id="paramdt" type="range" name="rangeInput" min="0.01" max="0.5" step ="0.01" value="0.3" onchange="$(paramdtSpan).text(this.value); k = this.value; console.log(k)">
			    </div>
			    <div class="col-md-6">
				Some cool parameters to try:
				<ul>
				    <li>
					Static Sync. e.g. (J,K) = (0.1,1)
				    </li>
				    <li>
					Static Async. e.g. (J,K) = (0.1,-1)
				    </li>
				    <li>
					Static Phase Wave. e.g. (J,K) = (1,0)
				    </li>
				    <li>
					Splintered Phase Wave. e.g. (J,K) = (2,-0.3)
				    </li>
				    <li>
					Active Phase Wave. e.g. (J,K) = (1,-0.8)
				    </li>
				</ul>
			    </div>
			</div>
			<br>
			<button type="button" class="btn btn-lg btn-block btn-primary" onclick="init_swarm()">Swarm</button>

		    </div>
		</div>
	    </div>
	</div>
	
	<div align="center">	
 	    <!-- where butterflies swarm --->
	    <div id="canvas" style="position: relative; width:500px; height:500px;">		
	    </div>
	</div>
    </body>
    
    <!-- for swarmalator -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="swarmalator.js"></script>    

    <!-- for collapsible panel -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>
     $(".panel-collapse").on("hide.bs.collapse", function () {
         $(".panel-collapse-clickable").find('i').removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down");
     });

     $(".panel-collapse").on("show.bs.collapse", function () {
         $(".panel-collapse-clickable").find('i').removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up");
     });
    </script>
</html>
